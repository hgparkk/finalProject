<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.codingbamboo.finalproject.notice.dao.INoticeDAO">

	<!-- 공지사항 목록 조회 -->
	<select id="getNoticeList" parameterType="map"
		resultType="com.codingbamboo.finalproject.notice.dto.NoticeDTO">
		SELECT
		notice_no AS noticeNo,
		attach_no AS attachNo,
		notice_title AS noticeTitle,
		notice_content AS noticeContent,
		notice_date AS noticeDate
		FROM notice
		WHERE 1=1
		<if test="searchKeyword != null and searchKeyword != ''">
			AND notice_title LIKE '%' || #{searchKeyword} || '%'
		</if>
		ORDER BY notice_date DESC
		<if test="limit != null">
			FETCH FIRST #{limit} ROWS ONLY
		</if>
	</select>


	<!-- 공지사항 상세 조회 -->
	<select id="getNoticeDetail" parameterType="int"
		resultType="com.codingbamboo.finalproject.notice.dto.NoticeDTO">
		SELECT
		notice_no AS noticeNo,
		attach_no AS attachNo,
		notice_title AS noticeTitle,
		notice_content AS noticeContent,
		notice_date AS noticeDate
		FROM notice
		WHERE notice_no = #{noticeNo}
	</select>

	<!-- 공지사항 등록 -->
	<insert id="registNotice"
		parameterType="com.codingbamboo.finalproject.notice.dto.NoticeDTO">
		INSERT INTO notice (
		notice_no,
		attach_no,
		notice_title,
		notice_content,
		notice_date
		) VALUES (
		NOTICE_SEQ.NEXTVAL,
		#{attachNo},
		#{noticeTitle},
		#{noticeContent},
		SYSDATE
		)
	</insert>

	<!-- 공지사항 삭제 -->
	<delete id="deleteNotice" parameterType="int">
		DELETE FROM notice
		WHERE
		notice_no = #{noticeNo}
	</delete>

</mapper>
